{"version":3,"file":"static/js/473.242132fb.chunk.js","mappings":"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","sources":["Pages/Home/Home.jsx","firebase.js","firestoreApi.js"],"sourcesContent":["import { List } from 'bootstrap-4-react';\r\nimport {mail, phone, github, google, facebook} from '../../icons';\r\nimport { Link } from 'react-router-dom';\r\nimport { useState } from \"react\";\r\nimport {  signInWithPopup } from \"firebase/auth\";\r\nimport { googleAuthProvider, facebookAuthProvider, githubAuthProvider, auth } from \"../../firebase\";\r\nimport { isUserExistEmail } from '../../firestoreApi';\r\nimport {useNavigate, Navigate} from 'react-router-dom';\r\nimport { toast } from 'react-hot-toast';\r\n\r\nconst Home = () => {\r\n  const [user, setUser] = useState(null);\r\n\r\nconst navigate = useNavigate();\r\n  const googleSignIn = () => {\r\n\r\n    signInWithPopup(auth, googleAuthProvider)\r\n    .then((result) => {\r\n      const user = result.user;\r\n      const {email, displayName} = user;\r\n      isUserExistEmail(email, {email, displayName});\r\n      setUser(user);\r\n      navigate('/users');\r\n      toast.success('Welcome to your CRM');\r\n    })\r\n    .catch((err) => {\r\n      if(err.message === \"Firebase: Error (auth/account-exists-with-different-credential).\") {\r\n        toast.error(\"Нou are already registered with this mail\");\r\n      }\r\n    });\r\n    \r\n  };\r\n  \r\n   const facebookSignIn = () => {\r\n    signInWithPopup(auth, facebookAuthProvider).then((result) => {\r\n      const user = result.user;\r\n      const {email, displayName} = user;\r\n      isUserExistEmail(email, {email, displayName});\r\n      setUser(user);\r\n      navigate('/users');\r\n      toast.success('Welcome to your CRM');\r\n    }).catch((err) => {\r\n      if(err.message === \"Firebase: Error (auth/account-exists-with-different-credential).\") {\r\n        toast.error(\"Нou are already registered with this mail\");\r\n      }\r\n    })\r\n  };\r\n\r\n const gitHubSignIn = () => {\r\n    signInWithPopup(auth, githubAuthProvider).then((result) => {\r\n      const user = result.user;\r\n      const {email, displayName} = user;\r\n      isUserExistEmail(email, {email, displayName});\r\n      setUser(user);\r\n      navigate('/users');\r\n      toast.success('Welcome to your CRM');\r\n    }).catch((err) => {\r\n      if(err.message === \"Firebase: Error (auth/account-exists-with-different-credential).\") {\r\n        toast.error(\"Нou are already registered with this mail\");\r\n      }\r\n      \r\n    })\r\n  };\r\n\r\n    return (\r\n        <div>\r\n        {user ? <Navigate to='/users'/>\r\n        : <>\r\n        <h1>Enter or register</h1>\r\n        <List inline>\r\n        <List.Item inline><Link onClick={googleSignIn}><img src={google} alt='google icon'/></Link></List.Item>\r\n        <List.Item inline><Link onClick={facebookSignIn}><img src={facebook} alt='facebook icon'/></Link></List.Item>\r\n        <List.Item inline><Link onClick={gitHubSignIn}><img src={github} alt='github icon'/></Link></List.Item>\r\n        <List.Item inline><Link to='/sign-up-with-email'><img src={mail} alt='mail icon'/></Link></List.Item>\r\n        <List.Item inline><Link to='/sign-up-with-phone'><img src={phone} alt='phone icon'/></Link></List.Item>\r\n      </List>\r\n        </>\r\n      }\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default Home;","import { initializeApp } from 'firebase/app';\r\nimport { GithubAuthProvider, GoogleAuthProvider, getAuth, FacebookAuthProvider } from 'firebase/auth';\r\nimport {getFirestore} from 'firebase/firestore';\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyD9vfvfkZR7Jm1x7wNDIhh6PcfI19jMWJg\",\r\n    authDomain: \"crm-project-4aaef.firebaseapp.com\",\r\n    projectId: \"crm-project-4aaef\",\r\n    storageBucket: \"crm-project-4aaef.appspot.com\",\r\n    messagingSenderId: \"161287361864\",\r\n    appId: \"1:161287361864:web:19d90ee4a5cc4a927ecf7d\"\r\n  };\r\n  \r\nexport const app = initializeApp(firebaseConfig);\r\nexport const auth = getAuth(app);\r\nexport const db = getFirestore(app);\r\nexport const googleAuthProvider = new GoogleAuthProvider();\r\nexport const githubAuthProvider = new GithubAuthProvider();\r\nexport const facebookAuthProvider = new FacebookAuthProvider();\r\n\r\n","import { collection, addDoc, getDocs, query, where } from 'firebase/firestore';\r\nimport { db } from './firebase';\r\n\r\nconst database = collection(db, 'users');\r\n\r\n export const getData = async (setData) => {\r\nconst data = await getDocs(database);\r\n    setData(data.docs.map(item => {\r\n      return {...item.data(), id: item.id }\r\n    }));\r\n  };\r\n\r\n\r\n export const isUserExistEmail = async (email, data) => {\r\n    const q = query(database, where(\"email\", \"==\", email))\r\n    \r\n    const querySnapshot = await getDocs(q);\r\n    \r\n    \r\n    if (querySnapshot.empty) {\r\n        await addDoc(database, data);\r\n      } \r\n    }\r\n\r\n    export const isUserExistPhone = async (phoneNumber, data) => {\r\n        const q = query(database, where(\"phoneNumber\", \"==\",  phoneNumber))\r\n        \r\n        const querySnapshot = await getDocs(q);\r\n        \r\n        \r\n        if (querySnapshot.empty) {\r\n            console.log(\"Add user\");\r\n           \r\n            await addDoc(database, data);\r\n          }\r\n        }"],"names":["_useState","useState","_useState2","_slicedToArray","user","setUser","navigate","useNavigate","_jsx","children","Navigate","to","_jsxs","_Fragment","List","inline","Link","onClick","signInWithPopup","auth","googleAuthProvider","then","result","email","displayName","isUserExistEmail","toast","catch","err","message","src","alt","facebookAuthProvider","githubAuthProvider","app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","getAuth","db","getFirestore","GoogleAuthProvider","GithubAuthProvider","FacebookAuthProvider","database","collection","getData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","setData","data","wrap","_context","prev","next","getDocs","sent","docs","map","item","_objectSpread","id","stop","_x","apply","arguments","_ref2","_callee2","q","_context2","query","where","empty","addDoc","_x2","_x3","isUserExistPhone","_ref3","_callee3","phoneNumber","_context3","console","log","_x4","_x5"],"sourceRoot":""}